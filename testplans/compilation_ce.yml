# This config depends on the defaults.yml testplan
# Only diverging settings are defined here

prepare_shop:
  git:
    shop_url: https://github.com/OXID-eSales/oxideshop_metapackage_ce.git
    shop_ref: &git_shop_ref 'b-8.0'
  composer:
    allow_plugins:
      repositories: >
        oxid-esales/oxideshop-unified-namespace-generator:true
        oxid-esales/oxideshop-composer-plugin:true

install_shop:
  git:
    shop_ref: *git_shop_ref

unit_tests:
  configuration: &phpunit_configuration 'vendor/oxid-esales/oxideshop-ce/phpunit.xml'
  additional_options: '--bootstrap vendor/oxid-esales/oxideshop-ce/tests/bootstrap.php tests --coverage-clover=/var/www/unit_coverage.xml'

integration_tests:
  configuration: *phpunit_configuration
  additional_options: '--bootstrap vendor/oxid-esales/oxideshop-ce/tests/bootstrap.php'

codeception_tests:
  # Running on public runners, this should pose no problem
  max_parallel: &codeception_max_parallel 4

shop_setup_tests:
  max_parallel: *codeception_max_parallel
